<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ConcurSolutionz.Views.EntryPage"
             xmlns:models="clr-namespace:ConcurSolutionz.Models"
             Title="Entry">
    <ContentPage.BindingContext>
        <models:Entry/>

    </ContentPage.BindingContext>
    <ContentPage.Resources>
        <Style TargetType="Grid">
            <Setter Property="VisualStateManager.VisualStateGroups">
                <VisualStateGroupList>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal" />
                        <VisualState x:Name="Selected">
                            <VisualState.Setters>
                                <Setter Property="BackgroundColor"
                                        Value="LightSkyBlue" />
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateGroupList>
            </Setter>
        </Style>
    </ContentPage.Resources>
    <ScrollView>
        <VerticalStackLayout Spacing="10" Margin="10" Padding="16">
        <HorizontalStackLayout>
            <Label
                x:Name="EntryName"
                FontSize="Title"
                FontAttributes="Bold"
                Text="Elements of Software Construction"
                VerticalOptions="Center"/>
            <ImageButton
                Source="edit_32.png"
                x:Name="EditEntryNameButton"
                Clicked="EditEntryName_Clicked"/>
             <Button x:Name="UpdateMetadataButton" Text="Update Entry Metadata" Clicked="SetMetaData_Clicked"/>
            <Label x:Name="UpdateMessage" Text="Updated successfully!" VerticalOptions="Center" Margin=" 10" Opacity="0"/>
        </HorizontalStackLayout>

        <Grid ColumnDefinitions="*, *"
              ColumnSpacing="20">

            <Button Text="Transfer to Concur"
                    Grid.Column="0"
                    Margin="10"
                    Clicked="Concur_Clicked"/>

            <Button Text="Delete Entry"
                    Grid.Column="1"
                    Margin="10"
                    Clicked="DeleteEntry_Clicked"
                    BackgroundColor="IndianRed"/>

        </Grid>

        <Border StrokeShape="RoundRectangle 10,10,10,10"
                Stroke="#D3D3D3"
                BackgroundColor="AliceBlue"
                Padding="20,10"
                StrokeThickness="2"
                HeightRequest="400">

            <Grid ColumnDefinitions="*,*">
                <Grid RowDefinitions="*,*,*,*,*"
                      ColumnDefinitions="*,2*"
                      ColumnSpacing="20">

                    <Label Text="Policy:"
                           VerticalOptions="Center"
                           FontSize="Body"
                           Margin="40,0,0,0"/>

                    <Picker Title="Choose policy"
                            x:Name="Policy"
                            Grid.Row="0"
                            Grid.Column="1"
                            Background="{OnPlatform AliceBlue, MacCatalyst=AliceBlue, WinUI=#d3d3d3}"
                            FontSize="Body"
<<<<<<< HEAD
                            HeightRequest="{OnPlatform 50, MacCatalyst=50, WinUI=60}">
=======
                            HeightRequest="{OnPlatform 50, MacCatalyst=50, WinUI=60}">
>>>>>>> record_page
                        <Picker.ItemsSource>
                            <x:Array Type="{x:Type x:String}">
                                <x:String>Student Project Claim</x:String>
                                <x:String>Other Student Claim</x:String>
                                <x:String>Student Part-time Work Claim</x:String>
                                <x:String>Student Organisation Claim</x:String>
                                <x:String>Student Research Project Claim</x:String>
                            </x:Array>

                        </Picker.ItemsSource>

                    </Picker>


                    <Label Text="Claim Name:"
                           Grid.Column="0"
                           Grid.Row="1"
                           FontSize="Body"
                           VerticalOptions="Center"
                           Margin="40,0,0,0"/>
                  
                    <Entry  x:Name="ClaimNameInp"
                            Placeholder="Claim Name"
                            Grid.Column="1"
                            Grid.Row="1"
                            VerticalOptions="Center"
                            VerticalTextAlignment="Center"
                           FontSize="Body"
                           HeightRequest="50"/>

                    <Label Text="Claim Date:"
                           Grid.Column="0"
                           Grid.Row="2"
                           FontSize="Body"
                           VerticalOptions="Center"
                           Margin="40,0,0,0"/>
                    <Border VerticalOptions="Center"
                            Padding="10,20,0,0"
                            Grid.Column="1"
                            Grid.Row="2"
                            HeightRequest="50"
                            StrokeShape="RoundRectangle 5,5,5,5">

                        <DatePicker
                                x:Name="ClaimDateInp"
                                Grid.Column="1"
                                Grid.Row="2"
                                VerticalOptions="Center"/>
                    </Border>
                    

                    <Label Text="Project/Club:"
                           Grid.Column="0"
                           Grid.Row="3"
                           FontSize="Body"
                           VerticalOptions="Center"
                           Margin="40,0,0,0"/>
                  
                    <Entry x:Name="ProjectClubInp"
                           Placeholder="Project/Club"
                           Grid.Column="1"
                           Grid.Row="3"
                           VerticalOptions="Center"
                           VerticalTextAlignment="Center"
                           FontSize="Body"
                           HeightRequest="50"/>



                    <Label Text="Team Name:"
                           Grid.Column="0"
                           Grid.Row="4"
                           VerticalOptions="Center"
                           FontSize="Body"
                           Margin="40,0,0,0"/>

                    <Entry  x:Name="TeamNameInp"
                            Placeholder="Team Name"
                            Grid.Column="1"
                            Grid.Row="4"
                            VerticalOptions="Center"
                            VerticalTextAlignment="Center"
                           FontSize="Body"
                           HeightRequest="50"/>
                   
                </Grid>

                <VerticalStackLayout
                    Grid.Column="1"
                    Margin="20,0,0,0">
                    <Label Text="Purpose:"
                           FontSize="Body"
                           Margin="0,20,0,10"/>
                    <Border StrokeShape="RoundRectangle 5,5,5,5"
                            HeightRequest="300"
                            StrokeThickness="2">
                        <Editor x:Name="Purpose"
                                Placeholder="Enter purpose"
                                FontSize="Body"/>

                    </Border>



                </VerticalStackLayout>

            </Grid>
           

        </Border>
            

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="4*"/>
            </Grid.ColumnDefinitions>
            <Label Text="Entry Budget:"
                   FontSize="Body"
                   VerticalOptions="Center"/>
            <HorizontalStackLayout Grid.Column="1">
                <Label Text="$"
                       VerticalOptions="Center"
                       FontSize="Body"/>
                
                <Entry
                    x:Name="BudgetEditor"
                    Placeholder="Enter your budget"
                    HorizontalTextAlignment="Start"
                    VerticalOptions="Center"
                    VerticalTextAlignment="Center"
                    FontSize="Body"/>


            </HorizontalStackLayout>
           
            <Label Grid.Row="1"
                    Text="Current Expenditure: "
                    FontSize="Body"
                    VerticalOptions="Center"/>


            <HorizontalStackLayout Grid.Column="1" Grid.Row="1">
                <Label Text="$"
                VerticalOptions="Center"
                FontSize="Body"/> 
                <Label
                   x:Name="CurrentExpenseInput"
                   Grid.Row="1"
                   Grid.Column="1"
                   Text=""
                   FontSize="Body"
                   VerticalOptions="Center"/>
            </HorizontalStackLayout>


            <Label Grid.Row="2"
                   Text="Remaining Budget: "
                   FontSize="Body"
                   VerticalOptions="Center"/>


            <HorizontalStackLayout Grid.Column="1" Grid.Row="2">
                <Label Text="$"
                VerticalOptions="Center"
                FontSize="Body"/> 

                <Label
                   x:Name="RemainingBudget"
                   Grid.Row="2"
                   Grid.Column="1"
                   Text=""
                   FontSize="Body"
                   VerticalOptions="Center"/>
            </HorizontalStackLayout>

        </Grid>

        <Button x:Name="SetMetadataButton" Text="Save Entry Metadata" Clicked="SetMetaData_Clicked"/>
        <Grid ColumnDefinitions="*,*,*">
            <Button Text="New Record"
                    Margin="10"
                    Clicked="AddRecord_Clicked"
                    x:Name="AddRecordButton"/>
            <Button Grid.Column="1"
                    Text="Edit Record"
                    Margin="10"
                    Clicked="EditRecord_Clicked"
                    x:Name="EditRecordButton"/>
            <Button Text="Delete Record"
                    Grid.Column="2"
                    Margin="10"
                    Clicked="DeleteRecord_Clicked"
                    x:Name="DeleteRecordButton"/>

        </Grid>

          <ScrollView>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid x:Name="HeaderGrid" Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Text="Index" Grid.Column="0" HorizontalOptions="Center" FontAttributes="Bold"/>
                    <Label Text="Payment Type" Grid.Column="1" HorizontalOptions="Center" FontAttributes="Bold"/>
                    <Label Text="Expense Type" Grid.Column="2" HorizontalOptions="Center" FontAttributes="Bold"/>
                    <Label Text="Supplier Details" Grid.Column="3" HorizontalOptions="Center" FontAttributes="Bold"/>
                    <Label Text="Date" Grid.Column="4" HorizontalOptions="Center" FontAttributes="Bold"/>
                    <Label Text="Requested Amount" Grid.Column="5" HorizontalOptions="Center" FontAttributes="Bold"/> 
                </Grid>

                <CollectionView Grid.Row="1" x:Name="recordCollection" EmptyView="No data available" SelectionMode="Single" SelectionChanged="OnRecordSelectionChanged">

                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Label Text="{Binding RecordId}" Grid.Column="0" HorizontalOptions="Center"/>  
                                <Label Text="{Binding PaymentType}" Grid.Column="1" HorizontalOptions="Center"/>
                                <Label Text="{Binding ExpenseType}" Grid.Column="2" HorizontalOptions="Center"/>
                                <Label Text="{Binding SupplierName}" Grid.Column="3" HorizontalOptions="Center"/>
                                <Label Text="{Binding TransactionDate, StringFormat='{0:MM/dd/yyyy}'}" Grid.Column="4" HorizontalOptions="Center"/>
                                <Label Text="{Binding ReqAmount, StringFormat='{0:C2}'}" Grid.Column="5" HorizontalOptions="Center"/>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>
        </ScrollView>
    </VerticalStackLayout>

    </ScrollView>
    
</ContentPage>


       